using Nefarius.ViGEm.Client.Targets;
using System.Drawing;
using Vigem_ClassLibrary;
using Vigem_ClassLibrary.Commands;
using Vigem_ClassLibrary.SystemImplementations;
using Vigem_Common.Mappings;
using VigemControllers_ClassLibrary;
//using WindowsPixelReader;

namespace Vigem_Console
{
    internal class Program
    {
        static async Task Main(string[] args)
        {
            ControllerCreator creator = new();

            IDualShock4Controller createdDs4Controller = creator.GetDualShock4Controller();
            Dualshock4Controller cds4 = new(createdDs4Controller);
            Delayer delayer = new();
            ControllerUser userDs4 = new(cds4, delayer, 500);
            cds4.Connect();

            //PixelReader pr = new();


            //await delayer.Delay(1000);
            //await userDs4.PressButton(ButtonMappings.Options);

            //await delayer.Delay(1000);
            //await userDs4.PressDPad(DPadMappings.Left);

            //await delayer.Delay(1000);
            //await userDs4.PressDPad(DPadMappings.Right);

            //await delayer.Delay(1000);
            //await userDs4.PressButton(ButtonMappings.Cross);


            ChromeGamepadStateParser parser = new();

            string shortRun = "b9:1;t:27877.79999999702~b9:0;t:28046.19999999553~b15:1;t:28458.60000000149~b15:0;t:28725.69999999553~b15:1;t:29041.79999999702~b15:0;t:29157.79999999702~b0:1;t:29342~b0:0;t:29573.79999999702~";
            string paused_short = "b9:1;t:27877.79999999702~b9:0;t:28046.19999999553~b15:1;t:28458.60000000149~b15:0;t:28725.69999999553~b15:1;t:29041.79999999702~b15:0;t:29157.79999999702~b0:1;t:29342~b0:0;t:29573.79999999702~b15:1;t:29610.29999999702~b15:0;t:30458.5~b15:1;t:30809.69999999553~b15:0;t:30926.19999999553~b0:1;t:31277.69999999553~b0:0;t:31590~b15:1;t:31621.89999999851~b15:0;t:31993.89999999851~b15:1;t:32309.69999999553~b15:0;t:32442.19999999553~b0:1;t:32478~b0:0;t:32794.10000000149~b15:1;t:32825.69999999553~b15:0;t:33125.79999999702~b14:1;t:33437.89999999851~b14:0;t:33477.69999999553~b0:1;t:33609.89999999851~b14:1;t:33658.39999999851~b14:0;t:33889.79999999702~b0:0;t:33937.69999999553~b15:1;t:34846.19999999553~b15:0;t:34877.5~b0:1;t:35746.39999999851~b14:1;t:35925.60000000149~b0:0;t:36341.60000000149~b14:0;t:36642.5~b15:1;t:37061.79999999702~b15:0;t:37161.69999999553~b0:1;t:37494.89999999851~b0:0;t:37709.5~b15:1;t:38609.60000000149~b15:0;t:38994.29999999702~b9:1;t:39693.60000000149~b9:0;t:39822.19999999553~";
            string notPaused_short = "b15:1;t:28458.60000000149~b15:0;t:28725.69999999553~b15:1;t:29041.79999999702~b15:0;t:29157.79999999702~b0:1;t:29342~b0:0;t:29573.79999999702~b15:1;t:29610.29999999702~b15:0;t:30458.5~b15:1;t:30809.69999999553~b15:0;t:30926.19999999553~b0:1;t:31277.69999999553~b0:0;t:31590~b15:1;t:31621.89999999851~b15:0;t:31993.89999999851~b15:1;t:32309.69999999553~b15:0;t:32442.19999999553~b0:1;t:32478~b0:0;t:32794.10000000149~b15:1;t:32825.69999999553~b15:0;t:33125.79999999702~b14:1;t:33437.89999999851~b14:0;t:33477.69999999553~b0:1;t:33609.89999999851~b14:1;t:33658.39999999851~b14:0;t:33889.79999999702~b0:0;t:33937.69999999553~b15:1;t:34846.19999999553~b15:0;t:34877.5~b0:1;t:35746.39999999851~b14:1;t:35925.60000000149~b0:0;t:36341.60000000149~b14:0;t:36642.5~b15:1;t:37061.79999999702~b15:0;t:37161.69999999553~b0:1;t:37494.89999999851~b0:0;t:37709.5~b15:1;t:38609.60000000149~b15:0;t:38994.29999999702~b9:1;t:39693.60000000149~b9:0;t:39822.19999999553~";
            string dumbRun = "b9:1;t:71994.69999999925~b9:0;t:72107.29999999702~b15:1;t:72794.89999999851~b2:1;t:73578.59999999776~b15:0;t:75423.39999999851~b2:0;t:75462.69999999925~b15:1;t:75879.19999999925~b0:1;t:75910.59999999776~b0:0;t:76542.89999999851~b15:0;t:76847.09999999776~b15:1;t:77230.69999999925~b2:1;t:77275.29999999702~b15:0;t:78507.09999999776~b2:0;t:78542.79999999702~b15:1;t:78811.29999999702~b0:1;t:78826.59999999776~b0:0;t:79378.69999999925~b15:0;t:79411~b15:1;t:81259.19999999925~b0:1;t:81290.59999999776~b0:0;b15:0;t:81498.69999999925~b14:1;t:81691~b14:0;t:81810.89999999851~b15:1;t:82579.09999999776~b2:1;t:82639.09999999776~b15:0;t:83846.79999999702~b2:0;t:83858.89999999851~b15:1;t:84378.89999999851~b0:1;t:84394.5~b0:0;b15:0;t:84963.19999999925~b15:1;t:85627.39999999851~b2:1;t:85679.09999999776~b0:1;t:85878.59999999776~b0:0;t:86643.19999999925~b2:0;t:86662.69999999925~b2:1;t:87210.89999999851~b2:0;t:88142.59999999776~b0:1;t:88263.19999999925~b0:0;t:88806.79999999702~b15:0;t:88890.89999999851~b15:1;t:89162.59999999776~b15:0;t:89707.39999999851~b15:1;t:90162.89999999851~b2:1;t:90226.89999999851~b0:1;t:90778.89999999851~b0:0;t:91328~b2:0;t:91427.09999999776~b15:0;t:91443~b15:1;t:92422.89999999851~b2:1;t:92462.79999999702~b0:1;t:93295.5~b0:0;t:94091~b2:0;t:94210.79999999702~b15:0;t:94239~b15:1;t:94362.89999999851~b2:1;t:94379~b2:0;t:94442.79999999702~b0:1;t:94458.79999999702~b0:0;t:94822.79999999702~b15:0;t:94858.5~b0:1;t:95826.69999999925~b0:0;t:96011.19999999925~b15:1;t:96743.39999999851~b0:1;t:97762.5~b0:0;t:97862.89999999851~b15:0;t:98042.69999999925~b15:1;t:98523.09999999776~b15:0;t:98758.69999999925~b9:1;t:99594.39999999851~b9:0;t:99778.79999999702~";
            string fullRun = "b9:1;t:27877.79999999702~b9:0;t:28046.19999999553~b15:1;t:28458.60000000149~b15:0;t:28725.69999999553~b15:1;t:29041.79999999702~b15:0;t:29157.79999999702~b0:1;t:29342~b0:0;t:29573.79999999702~b15:1;t:29610.29999999702~b15:0;t:30458.5~b15:1;t:30809.69999999553~b15:0;t:30926.19999999553~b0:1;t:31277.69999999553~b0:0;t:31590~b15:1;t:31621.89999999851~b15:0;t:31993.89999999851~b15:1;t:32309.69999999553~b15:0;t:32442.19999999553~b0:1;t:32478~b0:0;t:32794.10000000149~b15:1;t:32825.69999999553~b15:0;t:33125.79999999702~b14:1;t:33437.89999999851~b14:0;t:33477.69999999553~b0:1;t:33609.89999999851~b14:1;t:33658.39999999851~b14:0;t:33889.79999999702~b0:0;t:33937.69999999553~b15:1;t:34846.19999999553~b15:0;t:34877.5~b0:1;t:35746.39999999851~b14:1;t:35925.60000000149~b0:0;t:36341.60000000149~b14:0;t:36642.5~b15:1;t:37061.79999999702~b15:0;t:37161.69999999553~b0:1;t:37494.89999999851~b0:0;t:37709.5~b15:1;t:38609.60000000149~b15:0;t:38994.29999999702~b9:1;t:39693.60000000149~b9:0;t:39822.19999999553~";
            string triggerTest = "b6:0.019607841968536377;t:265759.80000000075~b6:0.16862744092941284;t:265774.4000000004~b6:0.30980393290519714;t:265790.5~b6:0.43921568989753723;t:265806.5~b6:0.5411764979362488;t:265822.69999999925~b6:0.6392157077789307;t:265838.80000000075~b6:0.7372549176216125;t:265854.5~b6:0.8352941274642944;t:265870.5999999996~b6:0.9333333373069763;t:265890.5~b6:1;t:265910.5~b6:0.8509804010391235;t:266210.5999999996~b6:0.6784313917160034;t:266222.4000000004~b6:0.35686275362968445;t:266242.4000000004~b6:0.10980391502380371;t:266258.80000000075~b6:0.003921568393707275;t:266270.80000000075~b6:0;t:266290.9000000004~b7:0.0313725471496582;t:266527~b7:0.09803920984268188;t:266539.4000000004~b7:0.2705882489681244;t:266558.4000000004~b7:0.38823530077934265;t:266574.5999999996~b7:0.5098039507865906;t:266590.80000000075~b7:0.6274510025978088;t:266606.5~b7:0.7411764860153198;t:266622.80000000075~b7:0.8627451062202454;t:266638.5~b7:1;t:266658.5999999996~b7:0.8980392217636108;t:266942.80000000075~b7:0.47058823704719543;t:266958.80000000075~b7:0.03529411554336548;t:266974.5~b7:0;t:266990.9000000004~";
            string spidermanBetterFarm = "a0:0.12156867980957031;a1:-1;t:886043.5~a0:0.12941181659698486;t:886059.5~a0:0.13725495338439941;t:886075.5~a0:0.14509809017181396;t:886095.4000000022~a0:0.15294122695922852;t:886144.4000000022~a0:0.16862750053405762;t:886163.6000000015~a0:0.17647063732147217;t:886196.700000003~a0:0.18431377410888672;t:886227.4000000022~a0:0.19215691089630127;t:886395.6000000015~b0:1;t:886531.5~a0:0.18431377410888672;t:886560.4000000022~a0:0.19215691089630127;t:886579.5~a0:0.18431377410888672;t:886691.6000000015~a0:0.19215691089630127;t:886707.4000000022~a0:0.18431377410888672;t:886907.4000000022~a0:0.19215691089630127;t:886923.5~a2:-0.003921568393707275;t:887047.6000000015~a2:0.003921627998352051;b0:0;t:887059.6000000015~a0:0.18431377410888672;t:887080~a0:0.19215691089630127;t:887091.6000000015~a0:0.18431377410888672;t:887164.200000003~a0:0.19215691089630127;t:887179.5~a0:0.18431377410888672;t:887243.5~a0:0.19215691089630127;t:887259.5~a0:0.18431377410888672;t:887311.5~a0:0.19215691089630127;t:887327.4000000022~a0:0.18431377410888672;a2:-0.003921568393707275;t:887443.4000000022~a0:0.19215691089630127;a2:0.003921627998352051;b2:1;t:887463.5~a0:0.18431377410888672;t:887611.4000000022~a0:0.19215691089630127;t:887643.4000000022~a0:0.18431377410888672;t:887727.6000000015~a2:-0.003921568393707275;t:887747.700000003~a2:0.003921627998352051;t:887764.8000000007~a0:0.16078436374664307;t:887817.1000000015~a0:0.15294122695922852;t:887827.5~a0:0.14509809017181396;a1:-0.9372549057006836;t:887847.5~a1:-1;t:887859.6000000015~a1:-0.9686274528503418;t:887880.6000000015~a0:0.12156867980957031;a1:-1;t:887891.6000000015~a0:0.035294175148010254;t:887911.5~a0:-0.09019607305526733;t:887932.4000000022~a0:-0.15294116735458374;t:887943.6000000015~a0:-0.2392156720161438;t:887964.9000000022~a0:-0.29411762952804565;t:887975.700000003~a0:-0.4431372284889221;t:887995.4000000022~a0:-0.6313725709915161;a1:-0.9450980424880981;t:888011.5~a0:-0.8901960849761963;a1:-0.686274528503418;t:888031.4000000022~a0:-1;a1:-0.40392154455184937;t:888047.5~a1:-0.23137253522872925;t:888059.5~a1:-0.1450980305671692;t:888075.6000000015~a1:-0.12156862020492554;t:888095.4000000022~a1:-0.11372548341751099;t:888107.5~a1:-0.03529411554336548;t:888127.5~a1:0.09019613265991211;t:888147.5~a1:0.11372554302215576;t:888159.6000000015~a1:0.12941181659698486;t:888179.5~a1:0.13725495338439941;t:888275.4000000022~a1:0.14509809017181396;t:888292~a1:0.15294122695922852;t:888307.4000000022~a1:0.16078436374664307;t:888411.700000003~a1:0.19215691089630127;t:888443.4000000022~a1:0.23137259483337402;t:888459.5~a1:0.24705886840820312;t:888491.5~a1:0.2549020051956177;t:888512~a1:0.2627451419830322;t:888527.5~a1:0.37254905700683594;t:888547.6000000015~a1:0.46666669845581055;t:888563.4000000022~a0:-0.9450980424880981;a1:0.5843137502670288;t:888579.4000000022~a0:-0.843137264251709;a1:0.7254902124404907;t:888595.6000000015~a0:-0.7098039388656616;a1:0.8509804010391235;t:888611.5~a0:-0.5921568870544434;a1:0.929411768913269;t:888627.6000000015~a0:-0.45098036527633667;a1:1;t:888647.6000000015~a0:-0.37254899740219116;t:888664~a0:-0.3490195870399475;t:888675.6000000015~a0:-0.34117645025253296;t:888691.5~a0:-0.3333333134651184;t:888707.5~a0:-0.32549017667770386;t:888743.5~a0:-0.3176470398902893;t:888827.6000000015~a0:-0.30980390310287476;t:888907.6000000015~a0:-0.3019607663154602;t:888927.6000000015~a0:-0.2862744927406311;t:888947.8000000007~a0:-0.27843135595321655;t:888995.5~a0:-0.270588219165802;t:889032.5~a0:-0.26274508237838745;t:889107.6000000015~a0:-0.2549019455909729;t:889123.9000000022~a0:-0.24705880880355835;t:889143.5~a0:-0.2392156720161438;t:889159.700000003~a0:-0.23137253522872925;t:889195.5~a0:-0.2235293984413147;t:889211.4000000022~a0:-0.21568626165390015;t:889243.4000000022~a0:-0.2078431248664856;t:889291.6000000015~a0:-0.19999998807907104;t:889307.4000000022~a0:-0.1921568512916565;t:889343.9000000022~a0:-0.18431371450424194;t:889395.5~a0:-0.16862744092941284;t:889411.4000000022~a0:-0.15294116735458374;t:889427.6000000015~a0:-0.13725489377975464;t:889447.6000000015~a0:-0.1294117569923401;t:889459.4000000022~a0:-0.12156862020492554;t:889495.4000000022~a0:-0.10588234663009644;t:889507.6000000015~a0:-0.08235293626785278;t:889523.5~a0:-0.04313725233078003;t:889543.6000000015~a0:0.027451038360595703;t:889559.6000000015~a0:0.18431377410888672;t:889579.4000000022~a0:0.34117650985717773;t:889595.6000000015~a0:0.6078431606292725;a1:0.9215686321258545;t:889611.4000000022~a0:0.929411768913269;a1:0.615686297416687;t:889631.5~a0:1;a1:0.3803921937942505;t:889647.5~a1:0.2627451419830322;t:889659.4000000022~a1:0.17647063732147217;t:889679.5~a1:0.12941181659698486;t:889695.5~a1:0.06666672229766846;t:889711.4000000022~a1:0.043137311935424805;t:889747.4000000022~a1:0.050980448722839355;t:889779.6000000015~a1:-0.003921568393707275;t:889795.4000000022~a1:0.003921627998352051;t:889811.5~a1:-0.003921568393707275;t:889827.5~a1:-0.027450978755950928;t:889859.5~a1:-0.003921568393707275;t:889907.5~a1:-0.027450978755950928;t:889963.4000000022~a1:-0.003921568393707275;t:889995.5~a1:-0.027450978755950928;t:890027.5~a1:-0.003921568393707275;t:890047.5~a1:-0.027450978755950928;t:890059.4000000022~a1:-0.003921568393707275;t:890091.6000000015~a1:-0.027450978755950928;t:890147.4000000022~a1:-0.03529411554336548;t:890163.5~a1:-0.003921568393707275;t:890195.4000000022~a1:-0.027450978755950928;t:890227.5~a1:-0.011764705181121826;t:890243.4000000022~a1:-0.027450978755950928;t:890259.4000000022~a1:-0.003921568393707275;t:890275.4000000022~a1:-0.027450978755950928;t:890291.4000000022~a1:-0.011764705181121826;t:890327.4000000022~a1:-0.027450978755950928;t:890347.4000000022~a1:0.07450985908508301;t:890375.4000000022~a1:0.24705886840820312;t:890395.4000000022~a1:0.40392160415649414;t:890411.5~a0:0.9450980424880981;a1:0.5921568870544434;t:890427.5~a0:0.8117647171020508;a1:0.772549033164978;t:890443.6000000015~a0:0.6078431606292725;a1:0.9137254953384399;t:890459.6000000015~a0:0.34117650985717773;a1:1;t:890475.5~a0:0.09019613265991211;t:890495.6000000015~a0:-0.06666666269302368;t:890515.5~a0:-0.13725489377975464;t:890531.4000000022~a0:-0.18431371450424194;t:890547.5~a0:-0.23137253522872925;t:890563.4000000022~a0:-0.27843135595321655;t:890579.4000000022~a0:-0.30980390310287476;t:890595.5~a0:-0.3333333134651184;t:890611.4000000022~a0:-0.3490195870399475;t:890627.4000000022~a0:-0.3647058606147766;t:890643.5~a0:-0.3803921341896057;t:890659.5~a0:-0.3960784077644348;t:890675.5~a0:-0.40392154455184937;t:890695.5~a0:-0.41960781812667847;t:890711.5~a0:-0.427450954914093;t:890747.4000000022~a0:-0.43529409170150757;t:890763.5~a0:-0.4431372284889221;t:890779.4000000022~a0:-0.45098036527633667;t:890831.4000000022~a0:-0.4588235020637512;t:890875.4000000022~a0:-0.46666663885116577;t:890995.5~a0:-0.4588235020637512;t:891059.4000000022~a0:-0.45098036527633667;t:891079.5~a0:-0.34117645025253296;a1:0.7568627595901489;t:891095.5~a0:-0.09803920984268188;a1:0.050980448722839355;t:891111.5~a0:0.011764764785766602;a1:-0.04313725233078003;t:891127.6000000015~a0:0.019607901573181152;t:891147.6000000015~a2:-0.003921568393707275;t:891227.6000000015~a2:0.003921627998352051;t:891243.6000000015~b2:0;t:891311.5~b9:1;t:892059.6000000015~a2:-0.003921568393707275;t:892347.6000000015~a2:0.003921627998352051;t:892363.4000000022~b9:0;t:892611.5~a2:-0.003921568393707275;t:892691.6000000015~a2:0.003921627998352051;t:892707.700000003~a2:-0.003921568393707275;t:892908.8000000007~a2:0.003921627998352051;t:892927.6000000015~b13:1;t:893095.6000000015~b13:0;t:893427.5~a2:-0.003921568393707275;t:893859.5~a2:0.003921627998352051;t:893876.6000000015~b0:1;t:893924.6000000015~a2:-0.003921568393707275;t:893995.4000000022~a2:0.003921627998352051;t:894011.5~a2:-0.003921568393707275;t:894031.4000000022~a2:0.003921627998352051;t:894095.5~a2:-0.003921568393707275;t:894147.4000000022~a2:0.003921627998352051;t:894163.5~b0:0;t:894276~b0:1;t:894947.5~a2:-0.003921568393707275;t:895219.4000000022~a2:0.003921627998352051;t:895279.5~b0:0;t:895415.700000003~a2:-0.003921568393707275;t:895691.3000000007~a2:0.003921627998352051;t:895708.700000003~a2:-0.003921568393707275;t:895979.6000000015~a2:0.003921627998352051;t:895995.6000000015~a2:-0.003921568393707275;t:897347.4000000022~a2:0.003921627998352051;t:897359.4000000022~a2:-0.003921568393707275;t:898275.700000003~a2:0.003921627998352051;t:898291.4000000022~a2:-0.003921568393707275;t:898543.6000000015~a2:0.003921627998352051;t:898563.4000000022~a2:-0.003921568393707275;t:898659.3000000007~a2:0.003921627998352051;t:898675.6000000015~a2:-0.003921568393707275;t:898707.9000000022~a2:0.003921627998352051;t:898728.1000000015~";
            //string spidermanBetterFarm = "a0:0.12156867980957031;a1:-1;t:886043.5~a0:0.12941181659698486;t:886059.5~a0:0.13725495338439941;t:886075.5~a0:0.14509809017181396;t:886095.4000000022~a0:0.15294122695922852;t:886144.4000000022~a0:0.16862750053405762;t:886163.6000000015~a0:0.17647063732147217;t:886196.700000003~a0:0.18431377410888672;t:886227.4000000022~a0:0.19215691089630127;t:886395.6000000015~b0:1;t:886531.5~a0:0.18431377410888672;t:886560.4000000022~a0:0.19215691089630127;t:886579.5~a0:0.18431377410888672;t:886691.6000000015~a0:0.19215691089630127;t:886707.4000000022~a0:0.18431377410888672;t:886907.4000000022~a0:0.19215691089630127;t:886923.5~a2:-0.003921568393707275;t:887047.6000000015~a2:0.003921627998352051;b0:0;t:887059.6000000015~a0:0.18431377410888672;t:887080~a0:0.19215691089630127;t:887091.6000000015~a0:0.18431377410888672;t:887164.200000003~a0:0.19215691089630127;t:887179.5~a0:0.18431377410888672;t:887243.5~a0:0.19215691089630127;t:887259.5~a0:0.18431377410888672;t:887311.5~a0:0.19215691089630127;t:887327.4000000022~a0:0.18431377410888672;a2:-0.003921568393707275;t:887443.4000000022~a0:0.19215691089630127;a2:0.003921627998352051;b2:1;t:887463.5~a0:0.18431377410888672;t:887611.4000000022~a0:0.19215691089630127;t:887643.4000000022~a0:0.18431377410888672;t:887727.6000000015~a2:-0.003921568393707275;t:887747.700000003~a2:0.003921627998352051;t:887764.8000000007~a0:0.16078436374664307;t:887817.1000000015~a0:0.15294122695922852;t:887827.5~a0:0.14509809017181396;a1:-0.9372549057006836;t:887847.5~a1:-1;t:887859.6000000015~a1:-0.9686274528503418;t:887880.6000000015~a0:0.12156867980957031;a1:-1;t:887891.6000000015~a0:0.035294175148010254;t:887911.5~a0:-0.09019607305526733;t:887932.4000000022~a0:-0.15294116735458374;t:887943.6000000015~a0:-0.2392156720161438;t:887964.9000000022~a0:-0.29411762952804565;t:887975.700000003~a0:-0.4431372284889221;t:887995.4000000022~a0:-0.6313725709915161;a1:-0.9450980424880981;t:888011.5~a0:-0.8901960849761963;a1:-0.686274528503418;t:888031.4000000022~a0:-1;a1:-0.40392154455184937;t:888047.5~a1:-0.23137253522872925;t:888059.5~a1:-0.1450980305671692;t:888075.6000000015~a1:-0.12156862020492554;t:888095.4000000022~a1:-0.11372548341751099;t:888107.5~a1:-0.03529411554336548;t:888127.5~a1:0.09019613265991211;t:888147.5~a1:0.11372554302215576;t:888159.6000000015~a1:0.12941181659698486;t:888179.5~a1:0.13725495338439941;t:888275.4000000022~a1:0.14509809017181396;t:888292~a1:0.15294122695922852;t:888307.4000000022~a1:0.16078436374664307;t:888411.700000003~a1:0.19215691089630127;t:888443.4000000022~a1:0.23137259483337402;t:888459.5~a1:0.24705886840820312;t:888491.5~a1:0.2549020051956177;t:888512~a1:0.2627451419830322;t:888527.5~a1:0.37254905700683594;t:888547.6000000015~a1:0.46666669845581055;t:888563.4000000022~a0:-0.9450980424880981;a1:0.5843137502670288;t:888579.4000000022~a0:-0.843137264251709;a1:0.7254902124404907;t:888595.6000000015~a0:-0.7098039388656616;a1:0.8509804010391235;t:888611.5~a0:-0.5921568870544434;a1:0.929411768913269;t:888627.6000000015~a0:-0.45098036527633667;a1:1;t:888647.6000000015~a0:-0.37254899740219116;t:888664~a0:-0.3490195870399475;t:888675.6000000015~a0:-0.34117645025253296;t:888691.5~a0:-0.3333333134651184;t:888707.5~a0:-0.32549017667770386;t:888743.5~a0:-0.3176470398902893;t:888827.6000000015~a0:-0.30980390310287476;t:888907.6000000015~a0:-0.3019607663154602;t:888927.6000000015~a0:-0.2862744927406311;t:888947.8000000007~a0:-0.27843135595321655;t:888995.5~a0:-0.270588219165802;t:889032.5~a0:-0.26274508237838745;t:889107.6000000015~a0:-0.2549019455909729;t:889123.9000000022~a0:-0.24705880880355835;t:889143.5~a0:-0.2392156720161438;t:889159.700000003~a0:-0.23137253522872925;t:889195.5~a0:-0.2235293984413147;t:889211.4000000022~a0:-0.21568626165390015;t:889243.4000000022~a0:-0.2078431248664856;t:889291.6000000015~a0:-0.19999998807907104;t:889307.4000000022~a0:-0.1921568512916565;t:889343.9000000022~a0:-0.18431371450424194;t:889395.5~a0:-0.16862744092941284;t:889411.4000000022~a0:-0.15294116735458374;t:889427.6000000015~a0:-0.13725489377975464;t:889447.6000000015~a0:-0.1294117569923401;t:889459.4000000022~a0:-0.12156862020492554;t:889495.4000000022~a0:-0.10588234663009644;t:889507.6000000015~a0:-0.08235293626785278;t:889523.5~a0:-0.04313725233078003;t:889543.6000000015~a0:0.027451038360595703;t:889559.6000000015~a0:0.18431377410888672;t:889579.4000000022~a0:0.34117650985717773;t:889595.6000000015~a0:0.6078431606292725;a1:0.9215686321258545;t:889611.4000000022~a0:0.929411768913269;a1:0.615686297416687;t:889631.5~a0:1;a1:0.3803921937942505;t:889647.5~a1:0.2627451419830322;t:889659.4000000022~a1:0.17647063732147217;t:889679.5~a1:0.12941181659698486;t:889695.5~a1:0.06666672229766846;t:889711.4000000022~a1:0.043137311935424805;t:889747.4000000022~a1:0.050980448722839355;t:889779.6000000015~a1:-0.003921568393707275;t:889795.4000000022~a1:0.003921627998352051;t:889811.5~a1:-0.003921568393707275;t:889827.5~a1:-0.027450978755950928;t:889859.5~a1:-0.003921568393707275;t:889907.5~a1:-0.027450978755950928;t:889963.4000000022~a1:-0.003921568393707275;t:889995.5~a1:-0.027450978755950928;t:890027.5~a1:-0.003921568393707275;t:890047.5~a1:-0.027450978755950928;t:890059.4000000022~a1:-0.003921568393707275;t:890091.6000000015~a1:-0.027450978755950928;t:890147.4000000022~a1:-0.03529411554336548;t:890163.5~a1:-0.003921568393707275;t:890195.4000000022~a1:-0.027450978755950928;t:890227.5~a1:-0.011764705181121826;t:890243.4000000022~a1:-0.027450978755950928;t:890259.4000000022~a1:-0.003921568393707275;t:890275.4000000022~a1:-0.027450978755950928;t:890291.4000000022~a1:-0.011764705181121826;t:890327.4000000022~a1:-0.027450978755950928;t:890347.4000000022~a1:0.07450985908508301;t:890375.4000000022~a1:0.24705886840820312;t:890395.4000000022~a1:0.40392160415649414;t:890411.5~a0:0.9450980424880981;a1:0.5921568870544434;t:890427.5~a0:0.8117647171020508;a1:0.772549033164978;t:890443.6000000015~a0:0.6078431606292725;a1:0.9137254953384399;t:890459.6000000015~a0:0.34117650985717773;a1:1;t:890475.5~a0:0.09019613265991211;t:890495.6000000015~a0:-0.06666666269302368;t:890515.5~a0:-0.13725489377975464;t:890531.4000000022~a0:-0.18431371450424194;t:890547.5~a0:-0.23137253522872925;t:890563.4000000022~a0:-0.27843135595321655;t:890579.4000000022~a0:-0.30980390310287476;t:890595.5~a0:-0.3333333134651184;t:890611.4000000022~a0:-0.3490195870399475;t:890627.4000000022~a0:-0.3647058606147766;t:890643.5~a0:-0.3803921341896057;t:890659.5~a0:-0.3960784077644348;t:890675.5~a0:-0.40392154455184937;t:890695.5~a0:-0.41960781812667847;t:890711.5~a0:-0.427450954914093;t:890747.4000000022~a0:-0.43529409170150757;t:890763.5~a0:-0.4431372284889221;t:890779.4000000022~a0:-0.45098036527633667;t:890831.4000000022~a0:-0.4588235020637512;t:890875.4000000022~a0:-0.46666663885116577;t:890995.5~a0:-0.4588235020637512;t:891059.4000000022~a0:-0.45098036527633667;t:891079.5~a0:-0.34117645025253296;a1:0.7568627595901489;t:891095.5~a0:-0.09803920984268188;a1:0.050980448722839355;t:891111.5~a0:0.011764764785766602;a1:-0.04313725233078003;t:891127.6000000015~a0:0.019607901573181152;t:891147.6000000015~a2:-0.003921568393707275;t:891227.6000000015~a2:0.003921627998352051;t:891243.6000000015~b2:0;t:891311.5~b9:1;t:892059.6000000015~a2:-0.003921568393707275;t:892347.6000000015~a2:0.003921627998352051;t:892363.4000000022~b9:0;t:892611.5~a2:-0.003921568393707275;t:892691.6000000015~a2:0.003921627998352051;t:892707.700000003~a2:-0.003921568393707275;t:892908.8000000007~a2:0.003921627998352051;t:892927.6000000015~b13:1;t:893095.6000000015~b13:0;t:893427.5~a2:-0.003921568393707275;t:893859.5~a2:0.003921627998352051;t:893876.6000000015~b0:1;t:893924.6000000015~a2:-0.003921568393707275;t:893995.4000000022~a2:0.003921627998352051;t:894011.5~a2:-0.003921568393707275;t:894031.4000000022~a2:0.003921627998352051;t:894095.5~a2:-0.003921568393707275;t:894147.4000000022~a2:0.003921627998352051;t:894163.5~b0:0;t:894276~b0:1;t:894947.5~a2:-0.003921568393707275;t:895219.4000000022~a2:0.003921627998352051;t:895279.5~b0:0;t:895415.700000003~a2:-0.003921568393707275;t:895691.3000000007~a2:0.003921627998352051;t:895708.700000003~a2:-0.003921568393707275;t:895979.6000000015~a2:0.003921627998352051;t:895995.6000000015~a2:-0.003921568393707275;t:897347.4000000022~a2:0.003921627998352051;t:897359.4000000022~";
            var states = parser.GetStates(spidermanBetterFarm);
            

            await delayer.Delay(1000);

            while(true)
            {
                CommandExecutor executor = new(new RealStopwatch());
                executor.ExecuteCommands(states, cds4, 0);
                //await delayer.Delay(1000);

            }

            //cds4.SetTriggerState(TriggerMappings.LeftTrigger, 255);
            //cds4.SetTriggerState(TriggerMappings.RightTrigger, 255);

            //DELETE ME
            //await userDs4.PressButton(ButtonMappings.Options);

            //float? lastBrightness = null;
            //while (true)
            //{
            //    //await delayer.Delay(1000);
            //    //var pos = pr.GetCursorLocation();
            //    float brightness = pr.GetColorAtLocation(new Point(2725, 163)).GetBrightness();
            //    if (lastBrightness == null)
            //    {
            //        lastBrightness = brightness;
            //    }
            //    else if (lastBrightness != brightness)
            //    {
            //        break;
            //    }
            //    //Console.WriteLine($"{pos.X}, {pos.Y}");
            //}
        }
    }
}