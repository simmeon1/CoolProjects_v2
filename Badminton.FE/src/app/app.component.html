<form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div>
        <mat-form-field>
            <mat-label>Add players, one per line</mat-label>
            <textarea matInput cdkTextareaAutosize [formControl]="getControl('names')"></textarea>
        </mat-form-field>
    </div>
    <div>
        <mat-form-field>
            <mat-label>Minimum games each?</mat-label>
            <input matInput [formControl]="getControl('minGames')">
        </mat-form-field>
    </div>
    <div>
        <mat-form-field>
            <mat-label>How many courts?</mat-label>
            <input matInput [formControl]="getControl('courtCount')">
        </mat-form-field>
    </div>
    <div>
        <mat-checkbox [formControl]="getControl('shuffle')">Shuffle names</mat-checkbox>
    </div>
    <button matButton="filled" type="submit" [disabled]="!form.valid || state.isLoading()">Submit</button>
</form>
@if (state.hasValue()) {
    <pre>{{ state.value() | json }}</pre>
} @else if (state.error()) {
    Something went wrong. Is the form valid?
} @else if (state.isLoading()) {
    Loading...
}